<section class="annuncio-dettaglio-container">

  <h2 class="titolo-annuncio">{{ annuncio?.titolo }}</h2>

  <section class="riga-annuncio">

    <img [src]="annuncio?.foto" alt="Immagine annuncio" class="img-principale" />


    <section class="info-venditore">
      <p><i class="bi bi-person"></i> <strong>Utente:</strong> {{ venditore?.nome }}</p>
      <p><i class="bi bi-telephone"></i> <strong>Cellulare:</strong> {{ venditore?.cellulare }}</p>
      <p><i class="bi bi-envelope"></i> <strong>Email:</strong> {{ venditore?.email }}</p>


      <div class="bottoni-venditore">
          <a class="btn btn-primary" (click)="scrollTo('contact')"><i class="bi bi-chat-dots"></i> Contatta</a>
          <a class="btn btn-outline-secondary" (click)="scrollTo('review')"><i class="bi bi-pencil-square"></i> Scrivi una recensione</a>
      </div>
    </section>
  </section>

  <section class="dettagli-annuncio">
    <p><strong>Descrizione:</strong> {{ annuncio?.descrizione }}</p>
    <p><strong>Prezzo:</strong> {{ annuncio?.prezzo }} €</p>
    <p><strong>Categoria:</strong> {{ categoriaMap[annuncio?.categoria_id || 0] }}</p>
    <p><strong>Superficie:</strong> {{ annuncio?.superficie }} mq</p>
    <p><strong>Indirizzo:</strong> {{ annuncio?.indirizzo }}</p>
  </section>


  <app-contact-seller id="contact" *ngIf="annuncio"
    [venditoreId]="annuncio.venditore_id"
    [annuncioId]="annuncio.id"
    [annuncioTitolo]="annuncio.titolo">
  </app-contact-seller>


  <h3>Recensioni dell'annuncio:</h3>
  <p *ngIf="recensioni.length === 0">Ancora nessuna recensione.</p>

  <section class="recensioni" *ngIf="recensioni.length > 0">
      <div *ngFor="let r of recensioni" class="recensione">
          <p>Nome: {{ r.nome_autore }}</p>
          <p>Commento: {{ r.testo }}</p>
          <small>Voto: {{ r.voto }}/5 </small>
          <hr>
      </div>
  </section>

  <h4>Hai già visitato quest'immobile?</h4>
  <app-review-form id="review" [annuncio_id]="annuncio?.id"></app-review-form>
</section>
