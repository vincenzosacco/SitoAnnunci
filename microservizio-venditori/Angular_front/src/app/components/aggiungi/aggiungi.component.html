<form (ngSubmit)="$event.preventDefault()">

  <!-- Titolo -->
  <div class="custom-input-group">
    <label for="titolo" class="form-label">ğŸ“ Titolo</label>
    <input id="titolo" type="text" class="custom-input"
           placeholder="Scrivi il titolo del tuo immobile" name="titolo" #titolo>
  </div>

  <!-- Metri Quadri -->
  <div class="custom-input-group">
    <label for="m2" class="form-label">â†” Metri Quadri</label>
    <input id="m2" type="number" class="custom-input" placeholder="Inserisci i metri quadri" name="m2" #m2>
  </div>

  <!-- Descrizione -->
  <div class="custom-input-group">
    <label for="descrizione" class="form-label">ğŸ’¬ Descrizione</label>
    <textarea id="descrizione" class="custom-input" rows="4"
              placeholder="Scrivi una descrizione dettagliata" name="descrizione" #descrizione></textarea>
  </div>

  <!-- Prezzo -->
  <div class="custom-input-group">
    <label for="prezzo" class="form-label">ğŸ’¶ Prezzo</label>
    <input id="prezzo" type="number" step="0.01" class="custom-input"
           placeholder="Inserisci il prezzo" name="prezzo" #prezzo>
  </div>

  <!-- Tipo vendita -->
  <div class="custom-input-group">
    <label for="tipoVendita" class="form-label">âš–ï¸ Tipo vendita</label>
    <select id="tipoVendita" [(ngModel)]="tipoVendita" name="tipoVendita" class="custom-input" [ngModelOptions]="{standalone: true}">
      <option [value]="'compra'">Compra subito</option>
      <option [value]="'asta'">Asta</option>
    </select>
  </div>

  <!-- Categoria -->
  <div class="custom-input-group">
    <label for="categoria" class="form-label">ğŸ·ï¸ Categoria</label>
    <select id="categoria" [(ngModel)]="categoriaId" name="categoriaId" class="custom-input" [ngModelOptions]="{standalone: true}">
      <option [value]="1">Appartamento</option>
      <option [value]="2">Villa</option>
      <option [value]="3">Attico</option>
      <option [value]="4">Monolocale</option>
      <option [value]="5">Terreno</option>
      <option [value]="6">Box Auto</option>
      <option [value]="7">Ufficio</option>
    </select>
  </div>

  <!-- Mappa -->
  <!-- Indirizzo -->
  <div class="custom-input-group">
    <label for="indirizzo" class="form-label">ğŸ  Indirizzo</label>
    <input id="indirizzo" type="text" class="custom-input"
           placeholder="Inserisci l'indirizzo del tuo immobile"
           name="indirizzo" [(ngModel)]="indirizzo" [ngModelOptions]="{standalone: true}">
  </div>

  <!-- Mappa -->
  <div class="custom-input-group">
    <label class="form-label">ğŸ“ Posizione</label>
    <div id="map" style="height: 400px; width: 100%;"></div>
    <p *ngIf="latitudine !== null && longitudine !== null" class="mt-2">
      Coordinate selezionate: <strong>{{ latitudine.toFixed(5) }}, {{ longitudine.toFixed(5) }}</strong>
    </p>
  </div>

  <!-- Foto -->
  <div class="custom-input-group">
    <label for="foto" class="form-label">ğŸ“· Foto</label>
    <input id="foto" type="file" class="custom-input-file" accept="image/*" (change)="onFileSelected($event)" multiple>
  </div>

  <!-- Anteprima Foto -->
  <div *ngIf="fotoNuove.length > 0" class="foto-preview mt-3">
    <h5>Anteprima foto caricate:</h5>
    <div class="foto-grid">
      <div class="foto-item" *ngFor="let foto of fotoNuove; let i = index">
        <img [src]="'data:image/jpeg;base64,' + foto" alt="Foto nuova" />
        <button type="button" class="delete-btn" (click)="rimuoviFotoNuova(i)">ğŸ—‘ï¸</button>
      </div>
    </div>
  </div>

  <!-- Pulsanti -->
  <div class="d-flex justify-content-between mt-4">
    <button type="button" class="custom-btn cancel-btn" [routerLink]="['/home']">Indietro</button>
    <button type="button" class="custom-btn submit-btn"
            (click)="aggiornaTutto(titolo.value, descrizione.value, Number(m2.value), Number(prezzo.value))">
      Salva
    </button>
  </div>
</form>
