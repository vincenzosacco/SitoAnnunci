<div class="chat-popup" [class.open]="isOpen">
  <div class="chat-header" (click)="toggleChat()">
    <label><strong>Chat di Supporto</strong></label>
  </div>

  <div class="chat-body" *ngIf="isOpen">

    <div class="bot-message" *ngIf="!tag[0]">
      In quale ruolo ti identifichi?
      <div class="button-group">
        <button *ngFor="let r of ruolo" (click)="scegli(0, r)">
          {{r}}
        </button>
      </div>
    </div>
    <div *ngIf="tag[0]">
      <div class="bot-message">In quale ruolo ti identifichi?</div>
      <div class="user-message">{{tag[0]}}</div>
    </div>

    <div class="bot-message" *ngIf="tag[0] && !tag[1]">
      Quanto vuoi investire nella promozione?
      <div class="button-group">
        <button *ngFor="let i of investimento" (click)="scegli(1, i)">
          {{i}}
        </button>
      </div>
    </div>
    <div *ngIf="tag[1]">
      <div class="bot-message">Quanto vuoi investire nella promozione?</div>
      <div class="user-message">{{tag[1]}}</div>
    </div>

    <div class="bot-message" *ngIf="tag[1] && !tag[2]">
      Qual è il punto di forza dell'immobile?
      <div class="button-group">
        <button *ngFor="let p of puntoDiForza" (click)="scegli(2, p)">
          {{p}}
        </button>
      </div>
    </div>
    <div *ngIf="tag[2]">
      <div class="bot-message">Qual è il punto di forza dell'immobile?</div>
      <div class="user-message">{{tag[2]}}</div>
    </div>

    <div class="bot-message" *ngIf="tag[2] && !tag[3]">
      La vendita è urgente?
      <div class="button-group">
        <button *ngFor="let u of urgenza" (click)="scegli(3, u)">
          {{u}}
        </button>
      </div>
    </div>
    <div *ngIf="tag[3]">
      <div class="bot-message">La vendita è urgente?</div>
      <div class="user-message">{{tag[3]}}</div>
    </div>

    <div *ngIf="parte4Data && rispostaOttenuta">
      <div class="bot-message">
        <h3>Consigli:</h3>
        <ul>
          <li *ngFor="let r of chatService.getRaccomandazione(tag)">
            {{r}}
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
